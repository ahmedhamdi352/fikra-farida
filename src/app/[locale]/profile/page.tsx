'use client';

import { useEffect } from 'react'
import ProfileContent from './components/ProfileContent';
import Link from 'next/link';
import ClientUserLinks from './components/ClientUserLinks';
import { useGetProfileQuery } from 'hooks/profile';
import LoadingOverlay from 'components/ui/LoadingOverlay';

export default function ProfilePage() {

  const { data: profileData, isLoading, onGetProfile } = useGetProfileQuery();

  useEffect(() => {
    onGetProfile()
  }, []);

  if (isLoading) {
    return <LoadingOverlay isLoading={isLoading} />;
  }



  return (
    <div className="w-full min-h-screen py-8 px-2">
      <div className="w-full px-4 py-8 flex flex-col items-center">
        <div className="flex items-center justify-start md:justify-between w-full md:w-1/2 gap-8 border-b border-[var(--main-color1)] p-4">
          <Link
            href="/share"
            className="flex items-center gap-2 text-[var(--main-color1)] relative after:content-[''] after:absolute after:bottom-[-16px] after:left-0 after:w-full after:h-[2px] after:bg-[var(--main-color1)]"
          >
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none">
              <path
                d="M1.3335 11.2663C1.3335 10.393 1.3335 9.95701 1.53016 9.63634C1.64007 9.45702 1.79085 9.30625 1.97016 9.19634C2.29016 8.99967 2.7275 8.99967 3.60016 8.99967H4.3335C5.59083 8.99967 6.21883 8.99967 6.6095 9.39034C7.00016 9.78101 7.00016 10.409 7.00016 11.6663V12.3997C7.00016 13.273 7.00016 13.709 6.8035 14.0297C6.69358 14.209 6.54281 14.3598 6.3635 14.4697C6.0435 14.6663 5.60616 14.6663 4.7335 14.6663C3.42416 14.6663 2.7695 14.6663 2.28883 14.3717C2.01985 14.2068 1.7937 13.9806 1.62883 13.7117C1.3335 13.2297 1.3335 12.5757 1.3335 11.2663ZM9.00016 3.59967C9.00016 2.72634 9.00016 2.29034 9.19683 1.96967C9.30674 1.79036 9.45751 1.63959 9.63683 1.52967C9.95683 1.33301 10.3942 1.33301 11.2668 1.33301C12.5762 1.33301 13.2308 1.33301 13.7122 1.62767C13.9811 1.79254 14.2073 2.0187 14.3722 2.28767C14.6668 2.76967 14.6668 3.42434 14.6668 4.73301C14.6668 5.60634 14.6668 6.04234 14.4702 6.36301C14.3603 6.54232 14.2095 6.6931 14.0302 6.80301C13.7102 6.99967 13.2728 6.99967 12.4002 6.99967H11.6668C10.4095 6.99967 9.7815 6.99967 9.39083 6.60901C9.00016 6.21834 9.00016 5.59034 9.00016 4.33301V3.59967Z"
                fill="white"
              />
            </svg>
            SHARE
          </Link>
          <Link href="/analytics" className="flex items-center gap-2 ">
            <svg xmlns="http://www.w3.org/2000/svg" width="17" height="16" viewBox="0 0 17 16" fill="none">
              <path
                d="M5.1665 12.0003V10.667M8.49984 12.0003V10.0003M11.8332 12.0003V8.66699M2.1665 8.00033C2.1665 5.01499 2.1665 3.52166 3.09384 2.59433C4.02117 1.66699 5.51384 1.66699 8.49984 1.66699C11.4852 1.66699 12.9785 1.66699 13.9058 2.59433C14.8332 3.52166 14.8332 5.01433 14.8332 8.00033C14.8332 10.9857 14.8332 12.479 13.9058 13.4063C12.9785 14.3337 11.4858 14.3337 8.49984 14.3337C5.5145 14.3337 4.02117 14.3337 3.09384 13.4063C2.1665 12.479 2.1665 10.9863 2.1665 8.00033ZM9.00016 3.59967C9.00016 2.72634 9.00016 2.29034 9.19683 1.96967C9.30674 1.79036 9.45751 1.63959 9.63683 1.52967C9.95683 1.33301 10.3942 1.33301 11.2668 1.33301C12.5762 1.33301 13.2308 1.33301 13.7122 1.62767C13.9811 1.79254 14.2073 2.0187 14.3722 2.28767C14.6668 2.76967 14.6668 3.42434 14.6668 4.73301C14.6668 5.60634 14.6668 6.04234 14.4702 6.36301C14.3603 6.54232 14.2095 6.6931 14.0302 6.80301C13.7102 6.99967 13.2728 6.99967 12.4002 6.99967H11.6668C10.4095 6.99967 9.7815 6.99967 9.39083 6.60901C9.00016 6.21834 9.00016 5.59034 9.00016 4.33301V3.59967Z"
                stroke="white"
                stroke-width="1.5"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
              <path
                d="M4.49463 7.65797C5.9313 7.70597 9.1893 7.4893 11.0426 4.54797M9.82796 4.19263L11.0786 3.9913C11.2306 3.97197 11.4546 4.09263 11.51 4.23597L11.84 5.32797"
                stroke="white"
                stroke-width="1.5"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
            </svg>
            analytics
          </Link>
          <Link href="/connections" className="flex items-center gap-2 ">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none">
              <path
                d="M14 5H9V4H14V5ZM9 6H13V7H9V6ZM13.9688 11.0469C14.2604 11.1042 14.5312 11.2057 14.7812 11.3516C15.0312 11.4974 15.2448 11.6823 15.4219 11.9062C15.599 12.1302 15.7396 12.375 15.8438 12.6406C15.9479 12.9062 16 13.1927 16 13.5C16 13.8438 15.9349 14.1667 15.8047 14.4688C15.6745 14.7708 15.4948 15.0365 15.2656 15.2656C15.0365 15.4948 14.7708 15.6745 14.4688 15.8047C14.1667 15.9349 13.8438 16 13.5 16H11.5C11.1562 16 10.8333 15.9349 10.5312 15.8047C10.2292 15.6745 9.96354 15.4974 9.73438 15.2734C9.50521 15.0495 9.32552 14.7839 9.19531 14.4766C9.0651 14.1693 9 13.8438 9 13.5C9 13.2031 9.04948 12.9193 9.14844 12.6484C9.2474 12.3776 9.38542 12.1354 9.5625 11.9219C9.73958 11.7083 9.95052 11.5234 10.1953 11.3672C10.4401 11.2109 10.7083 11.1042 11 11.0469V12.0859C10.849 12.138 10.7135 12.2109 10.5938 12.3047C10.474 12.3984 10.3672 12.5078 10.2734 12.6328C10.1797 12.7578 10.112 12.8932 10.0703 13.0391C10.0286 13.1849 10.0052 13.3385 10 13.5C10 13.7083 10.0391 13.9036 10.1172 14.0859C10.1953 14.2682 10.3021 14.4271 10.4375 14.5625C10.5729 14.6979 10.7318 14.8047 10.9141 14.8828C11.0964 14.9609 11.2917 15 11.5 15H13.5C13.7083 15 13.9036 14.9609 14.0859 14.8828C14.2682 14.8047 14.4271 14.6979 14.5625 14.5625C14.6979 14.4271 14.8047 14.2682 14.8828 14.0859C14.9609 13.9036 15 13.7083 15 13.5C15 13.3385 14.9766 13.1823 14.9297 13.0312C14.8828 12.8802 14.8099 12.7422 14.7109 12.6172C14.612 12.4922 14.5026 12.3828 14.3828 12.2891C14.263 12.1953 14.1198 12.1224 13.9531 12.0703C13.9844 11.8828 14 11.6927 14 11.5C14 11.4271 13.9974 11.3516 13.9922 11.2734C13.987 11.1953 13.9792 11.1198 13.9688 11.0469ZM8.5 10C8.29167 10 8.09635 10.0391 7.91406 10.1172C7.73177 10.1953 7.57292 10.3021 7.4375 10.4375C7.30208 10.5729 7.19531 10.7318 7.11719 10.9141C7.03906 11.0964 7 11.2917 7 11.5C7 11.6667 7.02344 11.8229 7.07031 11.9688C7.11719 12.1146 7.1901 12.2526 7.28906 12.3828C7.38802 12.513 7.4974 12.6224 7.61719 12.7109C7.73698 12.7995 7.88021 12.8724 8.04688 12.9297C8.01562 13.1172 8 13.3073 8 13.5C8 13.5729 8.0026 13.6484 8.00781 13.7266C8.01302 13.8047 8.02083 13.8802 8.03125 13.9531C7.73958 13.901 7.46875 13.7995 7.21875 13.6484C6.96875 13.4974 6.75521 13.3125 6.57812 13.0938C6.40104 12.875 6.26042 12.6302 6.15625 12.3594C6.05208 12.0885 6 11.8021 6 11.5C6 11.1562 6.0651 10.8333 6.19531 10.5312C6.32552 10.2292 6.5026 9.96615 6.72656 9.74219C6.95052 9.51823 7.21615 9.33854 7.52344 9.20312C7.83073 9.06771 8.15625 9 8.5 9H10.5C10.8438 9 11.1667 9.0651 11.4688 9.19531C11.7708 9.32552 12.0339 9.50521 12.2578 9.73438C12.4818 9.96354 12.6615 10.2292 12.7969 10.5312C12.9323 10.8333 13 11.1562 13 11.5C13 11.7812 12.9479 12.0547 12.8438 12.3203C12.7396 12.5859 12.5938 12.8307 12.4062 13.0547C12.2188 13.2786 12.0078 13.4661 11.7734 13.6172C11.5391 13.7682 11.2812 13.8802 11 13.9531V12.9141C11.224 12.8672 11.401 12.8073 11.5312 12.7344C11.6615 12.6615 11.7604 12.5651 11.8281 12.4453C11.8958 12.3255 11.9427 12.1901 11.9688 12.0391C11.9948 11.888 12.0052 11.7083 12 11.5C12 11.2917 11.9609 11.0964 11.8828 10.9141C11.8047 10.7318 11.6979 10.5729 11.5625 10.4375C11.4271 10.3021 11.2682 10.1953 11.0859 10.1172C10.9036 10.0391 10.7083 10 10.5 10H8.5ZM16 0V10.7109C15.7031 10.4453 15.3698 10.2344 15 10.0781V1H1V11H4.80469C4.79427 11.0833 4.78385 11.1641 4.77344 11.2422C4.76302 11.3203 4.75521 11.4062 4.75 11.5C4.75 11.5833 4.75521 11.6667 4.76562 11.75C4.77604 11.8333 4.78646 11.9167 4.79688 12H0V0H16ZM2 9C2 8.72917 2.03646 8.46615 2.10938 8.21094C2.18229 7.95573 2.28646 7.71354 2.42188 7.48438C2.55729 7.25521 2.72135 7.04688 2.91406 6.85938C3.10677 6.67188 3.32292 6.51302 3.5625 6.38281C3.38542 6.20052 3.2474 5.98958 3.14844 5.75C3.04948 5.51042 3 5.26042 3 5C3 4.72396 3.05208 4.46615 3.15625 4.22656C3.26042 3.98698 3.40365 3.77344 3.58594 3.58594C3.76823 3.39844 3.97917 3.25521 4.21875 3.15625C4.45833 3.05729 4.71875 3.00521 5 3C5.27604 3 5.53385 3.05208 5.77344 3.15625C6.01302 3.26042 6.22656 3.40365 6.41406 3.58594C6.60156 3.76823 6.74479 3.97917 6.84375 4.21875C6.94271 4.45833 6.99479 4.71875 7 5C7 5.26042 6.95052 5.51042 6.85156 5.75C6.7526 5.98958 6.61458 6.20052 6.4375 6.38281C6.76562 6.5651 7.04948 6.79948 7.28906 7.08594C7.52865 7.3724 7.71354 7.69531 7.84375 8.05469C7.51042 8.10677 7.1875 8.20052 6.875 8.33594C6.80208 8.13802 6.70312 7.95833 6.57812 7.79688C6.45312 7.63542 6.3099 7.49479 6.14844 7.375C5.98698 7.25521 5.80729 7.16406 5.60938 7.10156C5.41146 7.03906 5.20833 7.00521 5 7C4.72396 7 4.46615 7.05208 4.22656 7.15625C3.98698 7.26042 3.77344 7.40365 3.58594 7.58594C3.39844 7.76823 3.25521 7.97917 3.15625 8.21875C3.05729 8.45833 3.00521 8.71875 3 9H2ZM5 4C4.85938 4 4.72917 4.02604 4.60938 4.07812C4.48958 4.13021 4.38542 4.20052 4.29688 4.28906C4.20833 4.3776 4.13542 4.48438 4.07812 4.60938C4.02083 4.73438 3.99479 4.86458 4 5C4 5.14062 4.02604 5.27083 4.07812 5.39062C4.13021 5.51042 4.20052 5.61458 4.28906 5.70312C4.3776 5.79167 4.48438 5.86458 4.60938 5.92188C4.73438 5.97917 4.86458 6.00521 5 6C5.14062 6 5.27083 5.97396 5.39062 5.92188C5.51042 5.86979 5.61458 5.79948 5.70312 5.71094C5.79167 5.6224 5.86458 5.51562 5.92188 5.39062C5.97917 5.26562 6.00521 5.13542 6 5C6 4.85938 5.97396 4.72917 5.92188 4.60938C5.86979 4.48958 5.79948 4.38542 5.71094 4.29688C5.6224 4.20833 5.51562 4.13542 5.39062 4.07812C5.26562 4.02083 5.13542 3.99479 5 4Z"
                fill="white"
              />
            </svg>
            connections
          </Link>
        </div>
        <ProfileContent profileData={profileData} />
        <div className="flex items-center justify-center gap-2 mt-4">
          <Link
            href="/add-link"
            className="inline-flex items-center whitespace-nowrap gap-2 bg-[#FEC400] text-black text-body px-4 py-3 rounded-2xl"
          >
            <svg xmlns="http://www.w3.org/2000/svg" width="25" height="24" viewBox="0 0 25 24" fill="none">
              <g clip-path="url(#clip0_2369_8968)">
                <path d="M9.25 14.25C9.25 14.7656 9.34766 15.25 9.54297 15.7031C9.73828 16.1562 10.0039 16.5547 10.3398 16.8984C10.6758 17.2422 11.0742 17.5117 11.5352 17.707C11.9961 17.9023 12.4844 18 13 18H15.25V19.5H13C12.2734 19.5 11.5938 19.3633 10.9609 19.0898C10.3281 18.8164 9.77344 18.4414 9.29688 17.9648C8.82031 17.4883 8.44531 16.9336 8.17188 16.3008C7.89844 15.668 7.75781 14.9844 7.75 14.25C7.75 13.5234 7.88672 12.8438 8.16016 12.2109C8.43359 11.5781 8.80859 11.0234 9.28516 10.5469C9.76172 10.0703 10.3164 9.69531 10.9492 9.42188C11.582 9.14844 12.2656 9.00781 13 9H13.75V10.5H13C12.4844 10.5 12 10.5977 11.5469 10.793C11.0938 10.9883 10.6953 11.2578 10.3516 11.6016C10.0078 11.9453 9.73828 12.3438 9.54297 12.7969C9.34766 13.25 9.25 13.7344 9.25 14.25ZM18.25 10.5V9H19C19.7266 9 20.4062 9.13672 21.0391 9.41016C21.6719 9.68359 22.2266 10.0586 22.7031 10.5352C23.1797 11.0117 23.5547 11.5664 23.8281 12.1992C24.1016 12.832 24.2422 13.5156 24.25 14.25C24.25 14.9375 24.1211 15.5977 23.8633 16.2305C23.6055 16.8633 23.2344 17.4258 22.75 17.918V14.25C22.75 13.7344 22.6523 13.25 22.457 12.7969C22.2617 12.3438 21.9922 11.9492 21.6484 11.6133C21.3047 11.2773 20.9062 11.0078 20.4531 10.8047C20 10.6016 19.5156 10.5 19 10.5H18.25ZM11.5 4.5C12.2266 4.5 12.9062 4.63672 13.5391 4.91016C14.1719 5.18359 14.7266 5.55859 15.2031 6.03516C15.6797 6.51172 16.0547 7.06641 16.3281 7.69922C16.6016 8.33203 16.7422 9.01562 16.75 9.75C16.75 10.4766 16.6133 11.1562 16.3398 11.7891C16.0664 12.4219 15.6914 12.9766 15.2148 13.4531C14.7383 13.9297 14.1836 14.3047 13.5508 14.5781C12.918 14.8516 12.2344 14.9922 11.5 15H10.75V13.5H11.5C12.0156 13.5 12.5 13.4023 12.9531 13.207C13.4062 13.0117 13.8008 12.7461 14.1367 12.4102C14.4727 12.0742 14.7422 11.6758 14.9453 11.2148C15.1484 10.7539 15.25 10.2656 15.25 9.75C15.25 9.23438 15.1523 8.75 14.957 8.29688C14.7617 7.84375 14.4922 7.44922 14.1484 7.11328C13.8047 6.77734 13.4062 6.50781 12.9531 6.30469C12.5 6.10156 12.0156 6 11.5 6H5.5C4.98438 6 4.5 6.09766 4.04688 6.29297C3.59375 6.48828 3.19531 6.75781 2.85156 7.10156C2.50781 7.44531 2.23828 7.84375 2.04297 8.29688C1.84766 8.75 1.75 9.23438 1.75 9.75C1.75 10.2656 1.84766 10.75 2.04297 11.2031C2.23828 11.6562 2.50391 12.0547 2.83984 12.3984C3.17578 12.7422 3.57422 13.0117 4.03516 13.207C4.49609 13.4023 4.98438 13.5 5.5 13.5H6.25V15H5.5C4.77344 15 4.09375 14.8633 3.46094 14.5898C2.82812 14.3164 2.27344 13.9414 1.79688 13.4648C1.32031 12.9883 0.945312 12.4336 0.671875 11.8008C0.398438 11.168 0.257812 10.4844 0.25 9.75C0.25 9.02344 0.386719 8.34375 0.660156 7.71094C0.933594 7.07812 1.30859 6.52344 1.78516 6.04688C2.26172 5.57031 2.81641 5.19531 3.44922 4.92188C4.08203 4.64844 4.76562 4.50781 5.5 4.5H11.5ZM24.25 19.5V21H21.25V24H19.75V21H16.75V19.5H19.75V16.5H21.25V19.5H24.25Z" fill="black" />
              </g>
              <defs>
                <clipPath id="clip0_2369_8968">
                  <rect width="24" height="24" fill="white" transform="translate(0.25)" />
                </clipPath>
              </defs>
            </svg>
            <span>Add New Link</span>
          </Link>
          <Link
            href="/add-product"
            className="inline-flex text-body items-center whitespace-nowrap gap-2 border border-[#FEC400] text-[#FEC400] px-4 py-3 rounded-2xl"
          >
            <svg xmlns="http://www.w3.org/2000/svg" width="25" height="24" viewBox="0 0 25 24" fill="none">
              <path d="M7.75684 11.9998C7.75684 11.8009 7.83585 11.6102 7.97651 11.4695C8.11716 11.3289 8.30792 11.2498 8.50684 11.2498H11.9998V7.75684C11.9998 7.55792 12.0789 7.36716 12.2195 7.22651C12.3602 7.08585 12.5509 7.00684 12.7498 7.00684C12.9487 7.00684 13.1395 7.08585 13.2802 7.22651C13.4208 7.36716 13.4998 7.55792 13.4998 7.75684V11.2498H16.9928C17.1917 11.2498 17.3825 11.3289 17.5232 11.4695C17.6638 11.6102 17.7428 11.8009 17.7428 11.9998C17.7428 12.1987 17.6638 12.3895 17.5232 12.5302C17.3825 12.6708 17.1917 12.7498 16.9928 12.7498H13.4998V16.2428C13.4998 16.4417 13.4208 16.6325 13.2802 16.7732C13.1395 16.9138 12.9487 16.9928 12.7498 16.9928C12.5509 16.9928 12.3602 16.9138 12.2195 16.7732C12.0789 16.6325 11.9998 16.4417 11.9998 16.2428V12.7498H8.50684C8.30792 12.7498 8.11716 12.6708 7.97651 12.5302C7.83585 12.3895 7.75684 12.1987 7.75684 11.9998ZM8.06716 3.76856C11.1796 3.4235 14.3207 3.4235 17.4332 3.76856C19.2602 3.97256 20.7352 5.41156 20.9492 7.24856C21.3192 10.4056 21.3192 13.5946 20.9492 16.7516C20.7342 18.5886 19.2592 20.0266 17.4332 20.2316C14.3207 20.5766 11.1796 20.5766 8.06716 20.2316C6.24016 20.0266 4.76516 18.5886 4.55116 16.7516C4.18282 13.5946 4.18282 10.4055 4.55116 7.24856C4.76516 5.41156 6.24116 3.97256 8.06716 3.76856ZM17.2672 5.25856C14.265 4.92579 11.2353 4.92579 8.23316 5.25856C7.6774 5.32021 7.15866 5.56743 6.76074 5.96028C6.36281 6.35312 6.10895 6.86864 6.04016 7.42356C5.68449 10.4645 5.68449 13.5366 6.04016 16.5776C6.10916 17.1323 6.36312 17.6476 6.76102 18.0402C7.15892 18.4329 7.67755 18.6799 8.23316 18.7416C11.2102 19.0736 14.2902 19.0736 17.2672 18.7416C17.8226 18.6797 18.341 18.4326 18.7387 18.0399C19.1364 17.6473 19.3902 17.1321 19.4592 16.5776C19.8148 13.5366 19.8148 10.4645 19.4592 7.42356C19.39 6.86915 19.1361 6.35421 18.7384 5.96178C18.3407 5.56936 17.8224 5.32234 17.2672 5.26056" fill="#FEC400" fill-opacity="0.9" />
            </svg>
            <span>Add New Product</span>
          </Link>
        </div>
        <ClientUserLinks profileLinks={profileData?.links} />

      </div>
    </div>
  );
}
